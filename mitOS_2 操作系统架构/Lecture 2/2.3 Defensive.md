
操作系统应该具有防御性（Defensive）。

操作系统需要能够应对恶意的应用程序。

[![](https://github.com/huihongxiao/MIT6.S081/raw/master/.gitbook/assets/image%20(185).png)](https://github.com/huihongxiao/MIT6.S081/blob/master/.gitbook/assets/image%20\(185\).png)

另一个需要考虑的是，应用程序不能够打破对它的隔离。应用程序非常有可能是恶意的，它或许是由攻击者写出来的，攻击者或许想要打破对应用程序的隔离，进而控制内核。一旦有了对于内核的控制能力，你可以做任何事情，因为内核控制了所有的硬件资源。

[![](https://github.com/huihongxiao/MIT6.S081/raw/master/.gitbook/assets/image%20(310).png)](https://github.com/huihongxiao/MIT6.S081/blob/master/.gitbook/assets/image%20\(310\).png)

所以操作系统或者说内核需要具备防御性来避免类似的事情发生。实际中，要满足这些要求还有点棘手。在Linux中，时不时的有一些内核的bug使得应用程序可以打破它的隔离域并控制内核。

通常来说，需要通过硬件来实现这的强隔离性。这里的硬件支持包括了两部分，第一部分是user/kernel mode，kernel mode在RISC-V中被称为Supervisor mode但是其实是同一个东西；第二部分是page table或者虚拟内存（Virtual Memory）。

[![](https://github.com/huihongxiao/MIT6.S081/raw/master/.gitbook/assets/image%20(317).png)](https://github.com/huihongxiao/MIT6.S081/blob/master/.gitbook/assets/image%20\(317\).png)

所以，所有的处理器，如果需要运行能够支持多个应用程序的操作系统，需要同时支持user/kernle mode和虚拟内存。具体的实现或许会有细微的差别，但是基本上来说所有的处理器需要能支持这些。我们在这门课中使用的RISC-V处理器就支持了这些功能。